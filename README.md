# üì¶ Digital Product Passport (DPP)

This project implements a **Digital Product Passport** on the Ethereum blockchain, following Scaffold-ETH 2 best practices. The DPP is an NFT (ERC-721) that accompanies a physical product, providing verifiable and immutable information about origin, batch, serial number, and extended metadata (e.g., LCA, certifications) via IPFS.

### How it works

#### 1. Smart Contract

The core of the system is the `ProductPassport.sol` smart contract:

- **Standard**: ERC-721 (NFT), extended with storage for product-specific metadata.
- **Minting**: Only the producer (contract owner) can mint new digital passports, specifying:
  - **Recipient**: Address that will receive the NFT (e.g., customer, distributor).
  - **GTIN**: GS1 code (EAN/UPC) of the product.
  - **Batch/Serial**: Product batch or serial number.
  - **URI**: IPFS CID pointing to a JSON file compliant with ESPR or similar standards.
- **Update**: The owner can update the metadata URI (e.g., to add new LCA data).
- **Consultation**: Anyone can read passport data via the public `passportInfo` mapping and the standard `tokenURI` function.

#### 2. Frontend (Next.js)

The user interface (UI) allows you to:

- **Mint a new passport** (owner only):
  - Fill in recipient address, GTIN, batch/serial, and IPFS URI.
  - Click ‚ÄúMint Passport‚Äù to send the transaction.
- **Consult a passport**:
  - Enter the NFT Token ID.
  - View the associated GTIN, batch/serial, and IPFS URI.

##### Key components

- **MintPassportCard**: Minting form, uses AddressInput and custom hooks `useScaffoldWriteContract` and `useTransactor` for safe contract interaction.
- **PassportDetailsCard**: Allows entering a Token ID and reading associated data via `useScaffoldReadContract`.
- **ConnectButton**: Manages wallet connection (RainbowKit).

#### 3. Typical flow

1. **Start local environment**:
   - `yarn chain` (local blockchain)
   - `yarn deploy` (deploy contract)
   - `yarn start` (start frontend at http://localhost:3000)
2. **Mint a passport**:
   - Owner fills the form and mints the NFT.
3. **Consultation**:
   - Anyone can enter a Token ID and see the product‚Äôs public data.
4. **Metadata update** (optional):
   - Owner can update the IPFS URI for an existing NFT.

#### Standards and interoperability

- **Metadata**: The URI points to a JSON file on IPFS, ideally compliant with ESPR, LCA, or other digital product passport standards.
- **Transferability**: NFTs are transferable like standard ERC-721, enabling ownership traceability.

#### Repository structure

- `packages/hardhat/contracts/ProductPassport.sol`: Main smart contract.
- `packages/nextjs/app/passports/page.tsx`: Frontend page for minting and consultation.
- `packages/nextjs/contracts/deployedContracts.ts`: Deployed contract ABIs and addresses (autogenerated).

#### Main dependencies

- **Smart contract**: Solidity, OpenZeppelin ERC721, Ownable.
- **Frontend**: Next.js, RainbowKit, Wagmi, Scaffold-ETH hooks and components.

#### Example of metadata JSON on IPFS

```json
{
  "name": "Product Passport XYZ",
  "description": "LCA, certifications, sustainability info...",
  "image": "ipfs://...",
  "attributes": [
    { "trait_type": "GTIN", "value": "08912345678904" },
    { "trait_type": "Batch", "value": "LOT-2025-07-04-A" }
  ]
}
```

#### Security notes

- Only the owner can mint and update passports.
- Public data is readable by anyone, ensuring transparency.

---

## ‚ùì FAQ

**Q: Who can mint a Digital Product Passport?**
A: Only the contract owner (typically the manufacturer) can mint new passports.

**Q: Can the NFT be transferred?**
A: Yes, the passport is a standard ERC-721 NFT and can be transferred like any other NFT.

**Q: What information is stored on-chain?**
A: The GTIN, batch/serial, and the IPFS URI are stored on-chain. Extended metadata is stored off-chain on IPFS.

**Q: Can the metadata be updated?**
A: Yes, the contract owner can update the metadata URI for each passport.

**Q: Is the data public?**
A: Yes, all on-chain data and the linked IPFS metadata are publicly accessible.

**Q: What standards are supported for metadata?**
A: The system is designed to be compatible with ESPR, LCA, and other digital product passport standards.

## Documentation

Visit these [docs](https://docs.scaffoldeth.io) to learn how to start building with Scaffold-ETH 2.

To know more about its features, check out this [website](https://scaffoldeth.io).
